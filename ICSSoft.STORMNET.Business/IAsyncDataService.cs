namespace ICSSoft.STORMNET.Business
{
    using System;
    using System.Collections.Generic;
    using System.Threading.Tasks;
    using ICSSoft.STORMNET;
    using ICSSoft.STORMNET.Business;
    using ICSSoft.STORMNET.Business.Audit;
    using ICSSoft.STORMNET.Security;

    public interface IAsyncDataService : ICloneable
    {
        //Нужен ли? DataServiceOptions Options { get; set; }

        /// <summary>
        /// Возвращает количество объектов удовлетворяющих запросу.
        /// </summary>
        /// <param name="customizationStruct">Что выбираем.</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит количество объектов.
        /// </returns>
        Task<int> GetObjectsCountAsync(LoadingCustomizationStruct customizationStruct);

        /// <summary>
        /// Догрузка одного объекта данных.
        /// </summary>
        /// <param name="dobject">Объект данных, который требуется загрузить.</param>
        /// <param name="clearDataObject">Очищать ли объект.</param>
        /// <param name="checkExistingObject">Проверять ли существование объекта в хранилище (вызывать исключение если объекта нет).</param>
        /// <returns>Объект <see cref="Task"/>, представляющий асинхронную операцию.</returns>
        Task LoadObjectAsync(DataObject dobject, bool clearDataObject = true, bool checkExistingObject = true);

        /// <summary>
        /// Догрузка одного объекта данных по представлению.
        /// </summary>
        /// <param name="dobject">Объект данных, который требуется загрузить.</param>
        /// <param name="dataObjectView">Представление.</param>
        /// <param name="clearDataObject">Очищать загруженные объекты (см. <see cref="ICSSoft.STORMNET.DataObject.Clear"/>).</param>
        /// <param name="checkExistingObject">Проверять ли существование объекта в хранилище (вызывать исключение если объекта нет).</param>
        /// <returns>Объект <see cref="Task"/>, представляющий асинхронную операцию.</returns>
        Task LoadObjectAsync(DataObject dobject, View dataObjectView, bool clearDataObject = true, bool checkExistingObject = true);

        /// <summary>
        /// Догрузка объектов данных по представлению.
        /// </summary>
        /// <param name="dataobjects">Исходные объекты.</param>
        /// <param name="dataObjectView">Представлене.</param>
        /// <param name="clearDataobject">Очищать загруженные объекты (см. <see cref="ICSSoft.STORMNET.DataObject.Clear"/>).</param>
        /// <returns>Объект <see cref="Task"/>, представляющий асинхронную операцию.</returns>
        Task LoadObjectsAsync(IEnumerable<DataObject> dataobjects, View dataObjectView, bool clearDataobject = true);

        /// <summary>
        /// Загрузка объектов данных по представлению.
        /// </summary>
        /// <param name="dataObjectView">Представление.</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит коллекцию объектов данных.
        /// </returns>
        Task<IEnumerable<DataObject>> LoadObjectsAsync(View dataObjectView);

        /// <summary>
        /// Загрузка объектов данных по нескольким представлениям.
        /// </summary>
        /// <param name="dataObjectViews">Массив представлений.</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит коллекцию объектов данных.
        /// </returns>
        Task<IEnumerable<DataObject>> LoadObjectsAsync(IEnumerable<View> dataObjectViews);

        /// <summary>
        /// Загрузка объектов данных по массиву структур.
        /// </summary>
        /// <param name="customizationStructs">Массив структур.</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит коллекцию объектов данных.
        /// </returns>
        Task<IEnumerable<DataObject>> LoadObjectsAsync(IEnumerable<LoadingCustomizationStruct> customizationStructs);

        /// <summary>
        /// Загрузка объектов данных по представлению.
        /// </summary>
        /// <param name="dataObjectView">Представление.</param>
        /// <param name="changeViewForTypeDelegate">Делегат, возвращающий представление в зависимости от типа объекта (используется когда получаемый список DataObject'ов может состоять из нескольких типов - напр. при наследовании DataObject'ов).</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит коллекцию объектов данных.
        /// </returns>
        Task<IEnumerable<DataObject>> LoadObjectsAsync(View dataObjectView, ChangeViewForTypeDelegate changeViewForTypeDelegate);

        /// <summary>
        /// Загрузка объектов данных по массиву представлений.
        /// </summary>
        /// <param name="dataObjectViews">Массив представлений.</param>
        /// <param name="changeViewForTypeDelegate">Делегат, возвращающий представление в зависимости от типа объекта (используется когда получаемый список DataObject'ов может состоять из нескольких типов - напр. при наследовании DataObject'ов).</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит коллекцию объектов данных.
        /// </returns>
        Task<IEnumerable<DataObject>> LoadObjectsAsync(IEnumerable<View> dataObjectViews, ChangeViewForTypeDelegate changeViewForTypeDelegate);

        /// <summary>
        /// Загрузка объектов данных по массиву структур.
        /// </summary>
        /// <param name="customizationStructs">Массив структур.</param>
        /// <param name="changeViewForTypeDelegate">Делегат, возвращающий представление в зависимости от типа объекта (используется когда получаемый список DataObject'ов может состоять из нескольких типов - напр. при наследовании DataObject'ов).</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит коллекцию объектов данных.
        /// </returns>
        Task<IEnumerable<DataObject>> LoadObjectsAsync(IEnumerable<LoadingCustomizationStruct> customizationStructs, ChangeViewForTypeDelegate changeViewForTypeDelegate);

        /// <summary>
        /// Загрузка объектов данных.
        /// </summary>
        /// <param name="customizationStruct">Настроечная структура для выборки <see cref="LoadingCustomizationStruct"/>.</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит коллекцию объектов данных.
        /// </returns>
        Task<IEnumerable<DataObject>> LoadObjectsAsync(LoadingCustomizationStruct customizationStruct);

        /// <summary>
        /// Загрузка объектов данных.
        /// </summary>
        /// <param name="customizationStruct">Настроечная структура для выборки <see cref="LoadingCustomizationStruct"/>.</param>
        /// <param name="State">Состояние вычитки (для последующей дочитки).</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит коллекцию объектов данных.
        /// </returns>
        //Task<IEnumerable<DataObject>> LoadObjects(LoadingCustomizationStruct customizationStruct, ref object State);

        /// <summary>
        /// Загрузка объектов данных.
        /// </summary>
        /// <param name="State">Состояние вычитки( для последующей дочитки).</param>
        /// <returns>
        /// Объект <see cref="Task"/>, представляющий асинхронную операцию.
        /// Результат содержит коллекцию объектов данных.
        /// </returns>
        //Task<IEnumerable<DataObject>> LoadObjects(ref object State);

        /// <summary>
        /// Обновление объекта данных.
        /// </summary>
        /// <param name="dobject">Объект данных, который требуется обновить.</param>
        /// <returns>Объект <see cref="Task"/>, представляющий асинхронную операцию.</returns>
        Task<DataObject> UpdateObjectAsync(DataObject dobject);

        /// <summary>
        /// Обновление объектов данных.
        /// </summary>
        /// <param name="objects">Объекты данных, которые требуется обновить.</param>
        /// <returns>Объект <see cref="Task"/>, представляющий асинхронную операцию.</returns>
        Task<IEnumerable<DataObject>> UpdateObjectsAsync(IEnumerable<DataObject> objects);
    }
}
